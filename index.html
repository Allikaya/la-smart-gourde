import React, { useState, useEffect } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Accordion, AccordionItem } from "@/components/ui/accordion";
import { Carousel, CarouselItem } from "@/components/ui/carousel";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectItem,
  SelectContent,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Globe, ShoppingCart, CreditCard } from "lucide-react";

const translations = {
  en: {
    title: "Smart Water Bottle",
    order: "Order Now",
    shipping: "Shipping: ",
    language: "Language",
    country: "Country",
    paymentOptions: "Payment Options",
    faq: "FAQ",
    terms: "Legal Mentions",
    privacy: "Privacy Policy",
    returns: "Return Policy",
    testimonials: [
      "Best bottle ever!",
      "Keeps my water fresh all day.",
      "Love the smart features!",
    ],
    form: {
      name: "Name",
      address: "Address",
      email: "Email",
      submit: "Submit Order",
    },
    deliveryTo: "Delivery to",
  },
  fr: {
    title: "Gourde Connectée",
    order: "Commander",
    shipping: "Livraison : ",
    language: "Langue",
    country: "Pays",
    paymentOptions: "Options de paiement",
    faq: "FAQ",
    terms: "Mentions légales",
    privacy: "Politique de confidentialité",
    returns: "Politique de retour",
    testimonials: [
      "Meilleure gourde !",
      "Garde mon eau fraîche toute la journée.",
      "J'adore les fonctions connectées !",
    ],
    form: {
      name: "Nom",
      address: "Adresse",
      email: "E-mail",
      submit: "Passer la commande",
    },
    deliveryTo: "Livraison vers",
  },
};

export default function SmartBottleSite() {
  const [lang, setLang] = useState("fr");
  const [country, setCountry] = useState("FR");

  const t = translations[lang];

  useEffect(() => {
    const browserLang = navigator.language.slice(0, 2);
    if (translations[browserLang]) setLang(browserLang);
  }, []);

  const shippingOptions = {
    FR: "5€ - Colissimo",
    US: "$10 - USPS",
    DE: "4€ - DHL",
    UK: "£6 - Royal Mail",
    ES: "5€ - Correos",
  };

  const countries = ["FR", "US", "DE", "UK", "ES"];

  return (
    <main className="max-w-4xl mx-auto p-4 space-y-6">
      <header className="flex items-center justify-between">
        <h1 className="text-3xl font-bold">{t.title}</h1>
        <div className="flex gap-4">
          <Select value={lang} onValueChange={setLang}>
            <SelectTrigger>
              <SelectValue placeholder={t.language} />
            </SelectTrigger>
            <SelectContent>
              {Object.keys(translations).map((code) => (
                <SelectItem key={code} value={code}>
                  {t.language}: {code.toUpperCase()}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>
          <Select value={country} onValueChange={setCountry}>
            <SelectTrigger>
              <SelectValue placeholder={t.country} />
            </SelectTrigger>
            <SelectContent>
              {countries.map((code) => (
                <SelectItem key={code} value={code}>
                  {t.country}: {code}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>
        </div>
      </header>

      <section className="text-lg">
        <p>
          {t.shipping} {shippingOptions[country]}
        </p>
        <p>
          {t.deliveryTo} {country}
        </p>
      </section>

      <Carousel>
        {t.testimonials.map((text, index) => (
          <CarouselItem key={index}>
            <Card>
              <CardContent className="p-4">{text}</CardContent>
            </Card>
          </CarouselItem>
        ))}
      </Carousel>

      <Accordion type="single" collapsible>
        <AccordionItem value="faq" trigger={t.faq}>
          ...
        </AccordionItem>
        <AccordionItem value="terms" trigger={t.terms}>
          ...
        </AccordionItem>
        <AccordionItem value="privacy" trigger={t.privacy}>
          ...
        </AccordionItem>
        <AccordionItem value="returns" trigger={t.returns}>
          ...
        </AccordionItem>
      </Accordion>

      <section>
        <h2 className="text-2xl font-semibold flex items-center gap-2">
          <CreditCard /> {t.paymentOptions}
        </h2>
        <div className="flex gap-4 items-center">
          <img src="/logos/visa.svg" alt="Visa" className="h-8" />
          <img src="/logos/paypal.svg" alt="PayPal" className="h-8" />
          <img src="/logos/klarna.svg" alt="Klarna" className="h-8" />
          <img src="/logos/oney.svg" alt="Oney" className="h-8" />
        </div>
      </section>

      <form className="grid gap-2">
        <Input placeholder={t.form.name} required />
        <Input placeholder={t.form.address} required />
        <Input type="email" placeholder={t.form.email} required />
        <Button type="submit" className="flex items-center gap-2">
          <ShoppingCart /> {t.form.submit}
        </Button>
      </form>
    </main>
  );
}
