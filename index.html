<script>
  const translations = {
    fr: {
      // Français déjà par défaut, donc vide ou identique à la valeur initiale.
    },
    en: {
      header_title: "Stay smart and hydrated with our connected bottle",
      header_subtitle: "Boost your energy and focus wherever you are",
      cta_order: "Order now",
      features_title: "Main Features",
      feature1: "Smart hydration alert",
      feature2: "Temperature display",
      feature3: "Detachable compartments",
      feature4: "Mobile app connected",
      feature5: "Optimized isothermal performance",
      specs_title: "Specifications",
      spec1: "Height: 25 cm",
      spec2: "Weight: 350 g",
      spec3: "Materials: Stainless steel + food-grade silicone",
      spec4: "Battery life: 7 days",
      price: "Price: €89",
      form_name: "Full name",
      form_email: "Email",
      form_address: "Shipping address",
      form_quantity: "Quantity",
      form_payment: "Payment method:",
      form_shipping: "Shipping options:",
      form_shipping_prompt: "Please select a country",
      form_submit: "Place order",
      return_policy: "Return Policy",
      return_details: "View details",
      return_text: "You have 30 days to return the product. It must be unused and in original packaging. Return costs are at your expense unless the error is ours.",
      reviews: "Customer Reviews",
      video_demo: "Product Demo Video",
      video_alt: "Your browser does not support video.",
      faq_title: "View frequently asked questions",
      faq_q1: "What is the warranty period?",
      faq_a1: "2 years from date of purchase.",
      faq_q2: "How does the app work?",
      faq_a2: "It connects via Bluetooth, compatible with iOS/Android.",
      faq_q3: "How do I clean the bottle?",
      faq_a3: "Detachable compartments, hand washable.",
      contact: "Contact",
      legal_title: "Legal Notice",
      legal_text: "Site publisher: GourdeConnectée SAS - RCS 000 000 000 - Headquarters: 10 rue des Innovations, Paris.",
      privacy_title: "Privacy Policy",
      privacy_text: "We only collect data necessary for delivery and customer service. Your data is never sold to third parties."
    },
    es: {
      header_title: "Mantente hidratado con nuestra botella inteligente",
      header_subtitle: "Aumenta tu energía y concentración estés donde estés",
      cta_order: "Pedir ahora",
      features_title: "Características principales",
      feature1: "Alerta inteligente de hidratación",
      feature2: "Pantalla de temperatura",
      feature3: "Compartimentos desmontables",
      feature4: "Aplicación móvil conectada",
      feature5: "Rendimiento isotérmico optimizado",
      specs_title: "Especificaciones",
      spec1: "Altura: 25 cm",
      spec2: "Peso: 350 g",
      spec3: "Materiales: Acero inoxidable + silicona alimentaria",
      spec4: "Duración batería: 7 días",
      price: "Precio: 89€",
      form_name: "Nombre completo",
      form_email: "Correo electrónico",
      form_address: "Dirección de envío",
      form_quantity: "Cantidad",
      form_payment: "Método de pago:",
      form_shipping: "Opciones de envío:",
      form_shipping_prompt: "Seleccione un país",
      form_submit: "Realizar pedido",
      return_policy: "Política de devoluciones",
      return_details: "Ver detalles",
      return_text: "Tiene 30 días para devolver el producto. Debe estar sin usar y en su embalaje original. Los gastos de devolución corren por su cuenta salvo error nuestro.",
      reviews: "Opiniones de clientes",
      video_demo: "Vídeo de demostración",
      video_alt: "Tu navegador no soporta vídeo.",
      faq_title: "Ver preguntas frecuentes",
      faq_q1: "¿Cuál es el periodo de garantía?",
      faq_a1: "2 años desde la fecha de compra.",
      faq_q2: "¿Cómo funciona la aplicación?",
      faq_a2: "Se conecta por Bluetooth, compatible con iOS/Android.",
      faq_q3: "¿Cómo se limpia la botella?",
      faq_a3: "Compartimentos desmontables, lavables a mano.",
      contact: "Contacto",
      legal_title: "Aviso legal",
      legal_text: "Editor del sitio: GourdeConnectée SAS - RCS 000 000 000 - Sede: 10 rue des Innovations, París.",
      privacy_title: "Política de privacidad",
      privacy_text: "Solo recopilamos los datos necesarios para el envío y la atención al cliente. Sus datos nunca se venden a terceros."
    }
  };

  function translatePage(lang) {
    const dict = translations[lang];
    if (!dict) return;

    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (dict[key]) {
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          el.placeholder = dict[key];
        } else {
          el.textContent = dict[key];
        }
      }
    });

    updateDeliveryOptions(); // Update options too
  }

  function updateDeliveryOptions() {
    const country = document.getElementById("country-select").value;
    const delivery = document.getElementById("delivery-options");
    const lang = document.getElementById("language-select").value;
    delivery.innerHTML = "";

    const textByLang = {
      fr: {
        fr: ['Standard - 3 jours - 5€', 'Express - 24h - 10€'],
        de: ['Standard - 4 jours - 7€', 'Express - 48h - 12€'],
        us: ['Standard - 7 jours - 15€', 'Express - 3 jours - 25€']
      },
      en: {
        fr: ['Standard - 3 days - €5', 'Express - 24h - €10'],
        de: ['Standard - 4 days - €7', 'Express - 48h - €12'],
        us: ['Standard - 7 days - €15', 'Express - 3 days - €25']
      },
      es: {
        fr: ['Estándar - 3 días - 5€', 'Exprés - 24h - 10€'],
        de: ['Estándar - 4 días - 7€', 'Exprés - 48h - 12€'],
        us: ['Estándar - 7 días - 15€', 'Exprés - 3 días - 25€']
      }
    };

    const options = textByLang[lang]?.[country] || [];
    options.forEach(option => {
      const opt = document.createElement("option");
      opt.textContent = option;
      delivery.appendChild(opt);
    });

    if (!options.length) {
      const prompt = translations[lang]?.form_shipping_prompt || "Please select a country";
      const opt = document.createElement("option");
      opt.textContent = prompt;
      delivery.appendChild(opt);
    }
  }

  document.getElementById('language-select').addEventListener('change', function(e) {
    const lang = e.target.value;
    translatePage(lang);
  });

  // Init default language
  window.addEventListener('DOMContentLoaded', () => {
    const lang = document.getElementById('language-select').value;
    translatePage(lang);
  });
</script>
